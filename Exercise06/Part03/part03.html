<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Exercise 6</title>
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../bootstrap/favicon.ico">

    <!-- Bootstrap core CSS -->
    <link href="../../bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="../../bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../../bootstrap/theme.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]>
    <script src="../../bootstrap/assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../../bootstrap/assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <link href="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.5/css/bootstrap-select.min.css" rel="stylesheet">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.5/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="../../angel/webgl-utils.js"></script>
    <script type="text/javascript" src="../../angel/initShaders.js"></script>
    <script type="text/javascript" src="../../angel/MV.js"></script>
    <script type="text/javascript" src="part03.js"></script>
    <script id="vertex-shader" type="x-shader/x-vertex">
    attribute vec4 vPosition, vNormal;

    varying vec3 L;
    varying vec3 normal;
    varying vec3 v;
    varying vec3 r;

    uniform mat4 projectionMatrix;
    uniform mat4 modelViewMatrix;
    uniform vec4 lightPosition;
    uniform vec4 eye;

    void main()
    {
        gl_Position = projectionMatrix * modelViewMatrix * vPosition;

        L = normalize(lightPosition.xyz - vPosition.xyz);
        normal = normalize(vNormal.xyz);

        v = normalize(eye.xyz);
        r = -reflect(L,normal);
    }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
    #define M_PI 3.1415926535897932384626433832795
    precision mediump float;

    varying vec3 L;
    varying vec3 normal;
    varying vec3 v;
    varying vec3 r;

    uniform sampler2D sampler;

    float atan2(float y, float x);
    void main();

    void main()
    {
        float theta = acos(normal.y);
        float phi = atan2(normal.z,normal.x);
        float u = theta / M_PI;
        float v = phi / (2.0*M_PI);
        vec2 texCoord = vec2(v,u);

        vec4 Ka = 0.3 * texture2D(sampler, texCoord);

        vec4 Kd = vec4 (0,0.8,0,1);
        Kd = 0.7 *texture2D(sampler, texCoord);

        vec3 Le = vec3(1.0, 1.0, 1.0);

        vec3 ambientColor = Ka.xyz * Le;
        vec3 diffuseColor = Kd.xyz * max(dot(normal, L), 0.0) * Le;

        gl_FragColor = vec4(ambientColor+diffuseColor,1);

    }

    float atan2(float y, float x) {
        return 2.0*atan((length(vec2(x, y))-x)/y);
    }
    </script>

</head>
<body role="document">

<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container col-md-12">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../main.html">Home</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">Exercise 1<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../../Exercise01/Part1-2/part01-02.html">Part 1 & 2</a></li>
                        <li><a href="../../Exercise01/Part03/part03.html">Part 3</a></li>
                        <li><a href="../../Exercise01/Part04/part04.html">Part 4</a></li>
                        <li><a href="../../Exercise01/Part05/part05.html">Part 5</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">Exercise 2<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../../Exercise02/Part01/part01.html">Part 1</a></li>
                        <li><a href="../../Exercise02/Part02/part02.html">Part 2</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">Exercise 3<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../../Exercise03/Part01/part01.html">Part 1</a></li>
                        <li><a href="../../Exercise03/Part02/part02.html">Part 2</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">Exercise 4<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../../Exercise04/Part1-2/part1-2.html">Part 1 & 2</a></li>
                        <li><a href="../../Exercise04/Part03/part03.html">Part 3</a></li>
                        <li><a href="../../Exercise04/Part04/part04.html">Part 4</a></li>
                        <li><a href="../../Exercise04/Part05/part05.html">Part 5</a></li>
                    </ul>
                </li>


                <li><a href="../../Exercise05/Part01/part01.html">Exercise 5</a></li>


                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">Exercise 6<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../../Exercise06/Part01/part01.html">Part 1 & 2</a></li>
                        <li><a href="../../Exercise06/Part03/part03.html">Part 3 & 4</a></li>
                    </ul>
                </li>


                <li><a href="../../Exercise07/Part01/part01.html">Exercise 7</a></li>


                <li><a href="../../Exercise08/Part01/part01.html">Exercise 8</a></li>


                <li><a href="../../Exercise09/Part01/part01.html">Exercise 9</a></li>

                <li><a href="../../Exercise10/Part01/part01.html">Exercise 10</a></li>

                <li><a href="../../Project/Part01/part01.html">Final Project</a></li>

            </ul>
        </div>
        <!--/.nav-collapse -->
    </div>
</nav>


<div class="container theme-showcase" role="main">

    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <h2 class="text-center">Mapping a texture on a spherical surface</h2></div>
    </div>

    <div class="row">

        <div class="col-md-8 col-md-offset-2">

            <canvas class="center-block" id="gl-canvas" width="500" height="500">
                <!-- The following message is displayed if the browser doesn’t
                -- support HTML5 -->
                Sorry; your web browser does not support HTML5’s canvas element.
            </canvas>
            <img id="earthTex" hidden src="earth.jpg"/>
        </div>
    </div>


    <div class="row">
        <div class="col-md-6 col-md-offset-3 control-row text-center">
            <select class="selectpicker" id="filteringModeMenu" data-style="btn-primary" size="1">
                <option value="0">Simple Point Sampling</option>
                <option value="1">Simple Linear Mapping</option>
                <option value="2">Point Sampling with MipMapping</option>
                <option value="3">Linear Mapping with MipMapping</option>
            </select>
        </div>
    </div>
    <div class="row">
        <p>Using simple linear sampling, some aliasing can be eliminated, but is still visible. The use of mipmapping smoothens the rendering of
            the texture, but then the dateline starts to appear as an artifact.
        </p>
    </div>

    </div>
</div>
<!-- /container -->


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../../bootstrap/dist/js/bootstrap.min.js"></script>
<script src="../../bootstrap/assets/js/docs.min.js"></script>
<script src="../../bootstrap/slider/bootstrap-slider.min.js"></script>
<link href="../../bootstrap/slider/css/bootstrap-slider.min.css" rel="stylesheet">
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="../../bootstrap/assets/js/ie10-viewport-bug-workaround.js"></script>
</body>
</html>