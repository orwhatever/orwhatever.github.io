<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Exercise 4</title>
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../bootstrap/favicon.ico">

    <title>Theme Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="../../bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="../../bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../../bootstrap/theme.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]>
    <script src="../../bootstrap/assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../../bootstrap/assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script type="text/javascript" src="../../angel/webgl-utils.js"></script>
    <script type="text/javascript" src="../../angel/initShaders.js"></script>
    <script type="text/javascript" src="../../angel/MV.js"></script>
    <script type="text/javascript" src="part05.js"></script>
    <script id="vertex-shader" type="x-shader/x-vertex">
    attribute vec4 vPosition, vNormal;

    varying vec3 L;
    varying vec3 normal;
    varying vec3 v;
    varying vec3 r;

    uniform mat4 projectionMatrix;
    uniform mat4 modelViewMatrix;
    uniform vec4 lightPosition;
    uniform vec4 eye;

    void main()
    {
        gl_Position = projectionMatrix * modelViewMatrix * vPosition;

        L = normalize(lightPosition.xyz - vPosition.xyz);
        normal = normalize(vNormal.xyz);

        v = normalize(eye.xyz);
        r = -reflect(L,normal);
    }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
    precision mediump float;

    varying vec3 L;
    varying vec3 normal;
    varying vec3 v;
    varying vec3 r;

    uniform vec4 Ka;
    uniform vec4 Kd;
    uniform vec4 Ks;
    uniform float shininess;

    void main()
    {
        vec3 Le = vec3(1.0, 1.0, 1.0);

        vec3 ambientColor = Ka.xyz * Le;
        vec3 spectralColor = Ks.xyz * pow(max(dot(r,v), 0.0),shininess) * Le;

        vec3 diffuseColor = Kd.xyz * max(dot(normal, L), 0.0) * Le;

        gl_FragColor = vec4(ambientColor+diffuseColor+spectralColor,1);
    }
    </script>

</head>
<body role="document">

<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container col-md-12">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../main.html">Home</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">Exercise 1<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../../Exercise01/Part1-2/part01-02.html">Part 1 & 2</a></li>
                        <li><a href="../../Exercise01/Part03/part03.html">Part 3</a></li>
                        <li><a href="../../Exercise01/Part04/part04.html">Part 4</a></li>
                        <li><a href="../../Exercise01/Part05/part05.html">Part 5</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">Exercise 2<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../../Exercise02/Part01/part01.html">Part 1</a></li>
                        <li><a href="../../Exercise02/Part02/part02.html">Part 2</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">Exercise 3<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../../Exercise03/Part01/part01.html">Part 1</a></li>
                        <li><a href="../../Exercise03/Part02/part02.html">Part 2</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">Exercise 4<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../../Exercise04/Part1-2/part1-2.html">Part 1 & 2</a></li>
                        <li><a href="../../Exercise04/Part03/part03.html">Part 3</a></li>
                        <li><a href="../../Exercise04/Part04/part04.html">Part 4</a></li>
                        <li><a href="../../Exercise04/Part05/part05.html">Part 5</a></li>
                    </ul>
                </li>


                <li><a href="../../Exercise05/Part01/part01.html">Exercise 5</a></li>


                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">Exercise 6<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../../Exercise06/Part01/part01.html">Part 1 & 2</a></li>
                        <li><a href="../../Exercise06/Part03/part03.html">Part 3 & 4</a></li>
                    </ul>
                </li>


                <li><a href="../../Exercise07/Part01/part01.html">Exercise 7</a></li>


                <li><a href="../../Exercise08/Part01/part01.html">Exercise 8</a></li>


                <li><a href="../../Exercise09/Part01/part01.html">Exercise 9</a></li>

                <li><a href="../../Exercise10/Part01/part01.html">Exercise 10</a></li>

                <li><a href="../../Project/Part01/part01.html">Final Project</a></li>

            </ul>
        </div>
        <!--/.nav-collapse -->
    </div>
</nav>



<div class="container theme-showcase" role="main">

    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <h2 class="text-center">Phong shading on fragment shader</h2></div>
    </div>

    <div class="row">

        <div class="col-md-6"><p>

            <div>Ka</div>
            <div class="control">
                <input id="KaSlider" type="text"
                       data-slider-min="0.01" data-slider-max="1.0"
                       data-slider-step="0.1" data-slider-value="0.01"/>
            </div>


            <div>Kd</div>
            <div class="control">
                <input id="KdSlider" type="text"
                       data-slider-min="0.01" data-slider-max="1.0"
                       data-slider-step="0.1" data-slider-value="0.8"/>
            </div>
            <div>Ks</div>
            <div class="control">
                <input id="KsSlider" type="text"
                       data-slider-min="0.01" data-slider-max="1.0"
                       data-slider-step="0.1" data-slider-value="0.9"/>
            </div>
            <div>Shininess</div>
            <div class="control">
                <input id="shininessSlider" type="text"
                       data-slider-min="1" data-slider-max="30"
                       data-slider-step="1" data-slider-value="20"/>
            </div>

            <div class="control">
                <button class="btn btn-primary btn-default" id="increaseSubsBtn">Increase Subdivisions</button>
                <button class="btn btn-primary btn-default" id="decreaseSubsBtn">Decrease Subdivisions</button>
            </div>
        </div>

        <div class="col-md-6 ">

            <canvas class="center-block" id="gl-canvas" width="500" height="500">
                <!-- The following message is displayed if the browser doesn’t
                -- support HTML5 -->
                Sorry; your web browser does not support HTML5’s canvas element.
            </canvas>
        </div>
    </div>
    <div class="row">

        <div class="col-md-12">

            <p>Compared to Part 4, the Phong shading is now implemented on the fragment shader. In this implementation
                it's the normal vector that gets interpolated. The leads to a better approximation of the relative
                position of the fragment compared to the light source,which in turn gives a better "qualitative"
                approximation of Phong shading compared to the "quantitative" approximation produced in the previous
                part.</p>
        </div>
    </div>
    <div class="row">

        <div class="col-md-12 text-justify">
            <h3>Answers to Part 6</h3>

            <h4>Flat, Gouraud and Phong shading</h4>

            <p>Generally all shading techniques are dependent on the normal vector <strong>n</strong> of the polygon
                point to be shaded, the vector <strong>l</strong> ,from the shaded point to the light source and vector
                <strong>v</strong> from the shaded point to the viewer</p>

            <p>In flat shading, the light source and and the viewer are consider to be located relatively far way from
                in such way that the vectors <strong>l</strong> and <strong>v</strong> are considered constant through
                the whole polygon. Flat shading has the main advantage that it's computationally cheap since
                calculations are done once per polygon, but with the price of less realism</p>

            <p>In Gouraud shading the vectors <strong>n</strong>, <strong>v</strong>, <strong>l</strong> are computed on
                each vertex. For the special case of the normal <strong>n</strong>, an normalized averaged is calculated
                based on the normals of the adjacent faces. The Gouraud shading is significantly improved compared to
                Flat shading especially if polygons used are small enough, however there is an increase in computational
                cost since shading operations are now performed per vertex.</p>

            <p>In Phong shading, the interpolation functionality of fragment processor is used to interpolate the three
                vectors <strong>n</strong>, <strong>v</strong>, <strong>l</strong> for each fragment and to provide a
                more precise approximation of the relative position of the fragment compared to the light source and the
                viewer which in turn leads to a more physically correct shading. Compared to the previous methods, Phong
                shading gives the most realistic result, but increases significantly the computational cost since now
                shading operations are performed for each fragment</p>

            <h4>Directional Lights Versus Point Lights</h4>

            <p>Directional lights "shoot" light in only one direction, whereas point lights "shoot" light in all
                directios</p>

            <h4>Viewer position influence</h4>

            <p>The Phong reflection model is dependant on the dot products of (<strong>n</strong>, <strong>v</strong>)
                and (<strong>n</strong>,<strong>l</strong>) so the viewer position influences the Phong reflection
                produced, but it does not affect the Lambertian term since it only depends on the dot product
                (<strong>n</strong>,<strong>l</strong>). The ambient term is constant through the scene independently
                from the light source and viewer positions.</p>

            <h4>Specular term and Shininess coefficient</h4>

            <p>The specular term control how dense the Phong reflection will be and in which colors. Setting it to (0,
                0, 0) will produce a black-/non-existent reflection.</p>

            <p>The shininess coefficient defines how fast the Phong reflection decreases as the viewer get misaligned to
                the light source. By increasing the shininess coefficient the "reflection ring" is getting smaller as it
                is observable for smaller angles of misalignement.</p>

            <h4>Coordinate Space</h4>

            <p>The calculations concerning shading are happening in world coordinates (the coordinate system that
                describes the relative positions of the scene objects) since shading is highly dependant on relative
                positions of the light source, the viewer and the scene objects</p>

        </div>
    </div>
</div>
<!-- /container -->


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../../bootstrap/dist/js/bootstrap.min.js"></script>
<script src="../../bootstrap/assets/js/docs.min.js"></script>
<script src="../../bootstrap/slider/bootstrap-slider.min.js"></script>
<link href="../../bootstrap/slider/css/bootstrap-slider.min.css" rel="stylesheet">
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="../../bootstrap/assets/js/ie10-viewport-bug-workaround.js"></script>
</body>
</html>